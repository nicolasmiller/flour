<html>
	<head>
		<meta charset="UTF-8">
		<title>
            test
		</title>
        <link data-src="test.scm"></link>
	</head>
	<body>
        <input type="file" id="file" multiple>
        <textarea id="console" rows="30" cols="80"></textarea>
        <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.1/jquery.min.js"></script>
		<script src="src/flour.js"></script>
        <script>
            (function($) {
                function filter(arr, pred) {
                    var i = 0;
                    for(;i < arr.length; i++) {
                    }
                }

                var f_console = {
                    elem : $('#console'),
                    append : function(text) {
                        var elem = this.elem;
                        if(elem.val().length > 0) {
                            elem.val(elem.val() + '\n' + text);
                        }
                        else {
                            elem.val(text);
                        }
                    }
                };

                $('#file').change(function() {
                    var reader = new FileReader();
                    reader.onloadend = function() {
                        f_console.append(Flour.eval(this.result));
                    };
                    reader.onerror = function(e) {
                        f_console.append(e.message);
                    };
                    reader.readAsText($(this).get(0).files[0]);
                });
            })(jQuery);
        </script>
	</body>
</html>
